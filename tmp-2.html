<!DOCTYPE html>
<html>
<head>
    <title>ポモドーロタイマー時間設定</title>
    <style>
        body { font-family: sans-serif; }
        .container { width: 80%; margin: 0 auto; }
        label { display: block; margin-bottom: 5px; }
        input[type="number"], select { margin-bottom: 10px; padding: 8px; border: 1px solid #ddd; }
        button { padding: 10px 15px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        #result { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ポモドーロタイマー時間設定</h1>
        <label for="sleep_hours">睡眠時間（時間）:</label>
        <input type="number" id="sleep_hours" min="3" max="10" value="7"><br>

        <label for="mental_state">メンタル状況:</label>
        <select id="mental_state">
            <option value="5">非常に良い</option>
            <option value="4">良い</option>
            <option value="3" selected>普通</option>
            <option value="2">悪い</option>
            <option value="1">非常に悪い</option>
        </select><br>

        <label for="work_time">作業時間帯:</label>
        <select id="work_time">
            <option value="morning" selected>午前 (9時〜12時)</option>
            <option value="afternoon">午後 (13時〜17時)</option>
            <option value="night">夜間 (18時〜22時)</option>
        </select><br>

        <button onclick="calculateTime()">計算</button>

        <div id="result"></div>
    </div>

    <script>
        const sleepHours = parseFloat(document.getElementById('sleep_hours').value);
        const mentalState = parseInt(document.getElementById('mental_state').value);
        const workTime = document.getElementById('work_time').value;
        const concentrationBaseTime = 25;
        const breakBaseTime = 5;
        function calculateTime() {

            let concentrationTime = concentrationBaseTime;
            let concentrationRate = 0.0;
            let mentalStateRate = 0.0;           
            let workRate = 0.0;           
            let totalRate = 0.0;


            // 3つの項目から作業時間を計算


            concentrationRate = calcConcentrationRate(sleepHours); 
            concentrationTime -= concentrationBaseTime * concentrationRate;

            // mentalState
            switch (mentalState) {
                case 5:
                    mentalStateRate = 0.2;
                    break;
                case 4:
                    mentalStateRate = 0.1;
                    break;
                case 3:
                    mentalStateRate = 0;
                    break;
                case 2:
                    mentalStateRate = -0.1;
                    break;
                case 1:
                    mentalStateRate = -0.2;
                    break;
            }
            concentrationTime -= -concentrationBaseTime * mentalStateRate;

            // workTime
            switch(workTime) {
                case 'morning':
                    workRate =  0.15;
                    break;
                case 'afternoon':
                    workRate = 0.05;
                    break;
                case 'night':
                    workRate = 0;
                    break;
            }
            concentrationTime -= concentrationBaseTime * workRate;

            breakTime =  5 + concentrationBaseTime - concentrationTime 
            if(breakTime < 5){
                breakTime = 5;
            }

            //結果をHTMLに表示
            const resultElement = document.getElementById('result');
            resultElement.textContent = `推奨作業時間: ${ (concentrationTime).toFixed(0)} 分、推奨休憩時間: ${breakTime.toFixed(0)} 分`;
        }

        function calcConcentrationRate(sleepTime){
            let rate = 0;
            if(sleeepTime > concentrationBaseTime){
                rate = -0.1;
            }else if(sleeepTime > 5){
                rate = 0
            }else if(sleeepTime > 3){
                rate = 0.03;
            }else if(sleeepTime >= 3){
                rate = 0.1;
            }

            return rate;
        }


    </script>
</body>
</html>